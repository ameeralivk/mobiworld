<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-commerce Dashboard</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="\css\admin css\salesReportPage.css">
</head>
<body>
    <%- include("../../views/partials/admin/layout") %>
    <div class="container-fluid py-4">
        <!-- Dashboard Stats -->
        <div class="row mb-4">
            <div class="col-md-3">
                <div class="stat-card" style="background-color: #7952b3;">
                    <div class="d-flex align-items-center">
                        <div>
                            <h6 class="mb-0">Total users</h6>
                            <h2><%= users %></h2>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-card" style="background-color: #fd7e14;">
                    <div class="d-flex align-items-center">
                        <div>
                            <h6 class="mb-0">Items sold</h6>
                            <h2><%= totalPurchasedItems %></h2>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-card" style="background-color: #0d6efd;">
                    <div class="d-flex align-items-center">
                        <div>
                            <h6 class="mb-0">Total Sales</h6>
                            <h2>₹<%= totalSales %></h2>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-card" style="background-color: #dc3545;">
                    <div class="d-flex align-items-center">
                        <div>
                            <h6 class="mb-0">Pending Orders</h6>
                            <h2><%= PendingOrders %></h2>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Products section -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h5>sold Products</h5>
                    <div class="d-flex">
                        <input type="text" class="date-input me-2" placeholder="From">
                        <span class="me-2">To</span>
                        <input type="text" class="date-input me-3" placeholder="To">
                        <button class="download-btn">
                            Download report
                            <span class="badge bg-danger ms-2">PDF</span>
                        </button>
                    </div>
                </div>
                
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>PRODUCT IMAGE</th>
                                <th>PRODUCT NAME</th>
                                <th>BRAND</th>
                                <th>AMOUNT</th>
                                <th>TOTAL <i class="bi bi-caret-down-fill small"></i></th>
                                <th>QTY SOLD <i class="bi bi-caret-down-fill small"></i></th>
                            </tr>
                        </thead>
                        <tbody>
                            <% orders.forEach(order => { %>
                                <% order.orderedItems.forEach(item => { %>
                            <tr>
                                <td><%= order.orderId %></td>
                                <td><img src="<%= item.product.productImage[0] %>" alt="Redmi A3x" class="product-image"></td>
                                <td><%= item.product.productName %></td>
                                <td><%= item.product.brand.brandName %></td>
                                <td>₹<%= item.price %></td>
                                <td>₹<%= (item.price * item.quantity) %></td>
                                <td><%= item.quantity %></td>
                            </tr>
                            <% }) %>
                            <% }) %>
                        </tbody>
                    </table>
                </div>
                
                <div class="d-flex justify-content-between align-items-center">
                    <small class="text-muted">SHOWING 1 OF 10</small>
                    <nav>
                        <ul class="pagination">
                            <li class="page-item">
                                <a class="page-link" href="#" aria-label="Previous">
                                    <span aria-hidden="true">&lsaquo;</span>
                                </a>
                            </li>
                            <li class="page-item"><a class="page-link" href="#">1</a></li>
                            <li class="page-item"><a class="page-link" href="#">2</a></li>
                            <li class="page-item active"><a class="page-link" href="#">3</a></li>
                            <li class="page-item"><a class="page-link" href="#">4</a></li>
                            <li class="page-item"><a class="page-link" href="#">...</a></li>
                            <li class="page-item"><a class="page-link" href="#">8</a></li>
                            <li class="page-item"><a class="page-link" href="#">9</a></li>
                            <li class="page-item">
                                <a class="page-link" href="#" aria-label="Next">
                                    <span aria-hidden="true">&rsaquo;</span>
                                </a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>