<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MOBIWORLD</title>
    <link rel="stylesheet" href="\css\addtocart.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="\css\shoppage_header.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/elevatezoom/3.0.8/jquery.elevateZoom.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11.17.2/dist/sweetalert2.min.css" rel="stylesheet">
  <link rel="stylesheet" href="\css\shoppage_footer.css">
  <link rel="stylesheet" href="\css\addaddress.css">
</head>
<body>
    <%- include("../../views/partials/user/shoppage_header") %>
    <div class="container form-container" style="background-color: blanchedalmond;">
        <h4 class="mb-4">EDIT ADDRESS</h4>
        
        <form method="post" action="/user/editaddress/<%= address._id %>">
            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="name" class="form-label">Name</label>
                    <input name="name" value="<%= address.name %>"   type="text" class="form-control" id="name" required>
                </div>
            </div>
            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="name" class="form-label">State</label>
                    <input name="state" value="<%= address.state %>"   type="text" class="form-control" id="state" required>
                </div>
            </div>
            
            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="streetAddress" class="form-label">Street Address</label>
                    <input name="address" value="<%= address.addressType %>" type="text" class="form-control" id="streetAddress" placeholder="House number and street name" required>
                </div>
                <!-- <div class="col-md-6">
                    <label for="apartment" class="form-label">&nbsp;</label>
                    <input  type="text" class="form-control" id="apartment" placeholder="Apartment, suite, unit etc. (optional)">
                </div> -->
            </div>
            
            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="city" class="form-label">Town / City</label>
                    <input name="City" value="<%= address.city %>" type="text" class="form-control" id="city" required>
                </div>
                <div class="col-md-6">
                    <label for="postcode" class="form-label">Postcode / ZIP *</label>
                    <input name="pincode" value="<%= address.pincode %>" type="text" class="form-control" id="postcode" required>
                </div>
            </div>
            
            <div class="row mb-4">
                <div class="col-md-6">
                    <label for="phone" class="form-label">Phone</label>
                    <input name="phone" value="<%= address.phone %>" type="tel" class="form-control" id="phone">
                </div>
                <div class="col-md-6">
                    <label for="altPhone" class="form-label">Alternative Phone</label>
                    <input name="altphone" value="<%= address.altPhone %>" type="tel" class="form-control" id="altPhone">
                </div>
            </div>
            
            <div class="d-flex justify-content-center mt-4">
                <button type="submit" class="btn add-btn text-white">Add Address</button>
            </div>
        </form>
    </div>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    
    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    const form = document.querySelector('form');

    form.addEventListener('submit', function (event) {
        event.preventDefault();

        const name = document.getElementById('name').value.trim();
        const state = document.getElementById('state').value.trim();
        const address = document.getElementById('streetAddress').value.trim();
        const city = document.getElementById('city').value.trim();
        const pincode = document.getElementById('postcode').value.trim();
        const phone = document.getElementById('phone').value.trim();
        const altphone = document.getElementById('altPhone').value.trim();

        const nameRegex = /^[A-Za-z\s]+$/;
        const stateCityRegex = /^[A-Za-z\s]+$/;
        const phoneRegex = /^\d{10}$/;
        const pincodeRegex = /^\d{6}$/;

        if (!name || !state || !address || !city || !pincode || !phone || !altphone) {
            return Swal.fire({
                icon: 'error',
                title: 'Missing Fields',
                text: 'All fields are required!',
                confirmButtonText: 'Okay'
            });
        }

        if (!nameRegex.test(name)) {
            return Swal.fire({
                icon: 'error',
                title: 'Invalid Name',
                text: 'Name should contain only letters and spaces',
                confirmButtonText: 'Okay'
            });
        }

        if (!stateCityRegex.test(state)) {
            return Swal.fire({
                icon: 'error',
                title: 'Invalid State',
                text: 'State should contain only letters and spaces',
                confirmButtonText: 'Okay'
            });
        }

        if (!stateCityRegex.test(city)) {
            return Swal.fire({
                icon: 'error',
                title: 'Invalid City',
                text: 'City should contain only letters and spaces',
                confirmButtonText: 'Okay'
            });
        }

        if (!phoneRegex.test(phone)) {
            return Swal.fire({
                icon: 'error',
                title: 'Invalid Phone',
                text: 'Enter a valid 10-digit phone number',
                confirmButtonText: 'Okay'
            });
        }

        if (!phoneRegex.test(altphone)) {
            return Swal.fire({
                icon: 'error',
                title: 'Invalid Alternate Phone',
                text: 'Enter a valid 10-digit alternate phone number',
                confirmButtonText: 'Okay'
            });
        }

        if (!pincodeRegex.test(pincode)) {
            return Swal.fire({
                icon: 'error',
                title: 'Invalid Pincode',
                text: 'Enter a valid 6-digit pincode',
                confirmButtonText: 'Okay'
            });
        }

        form.submit();
    });
</script>

</body>
</html>









